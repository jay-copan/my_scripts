#!/usr/bin/env bash

#################################
# Colors
#################################
BLUE="\e[38;2;170;220;230m"
LIGHT_BLUE="\e[38;2;200;235;245m"
DIM_BLUE="\e[38;2;120;180;200m"
WHITE="\e[38;2;255;255;255m"
GREEN="\e[38;2;170;255;200m"
RED="\e[38;2;255;170;170m"
RESET="\e[0m"
BOLD="\e[1m"

#################################
# Banner (gradient)
#################################
START_R=255; START_G=255; START_B=255
END_R=170; END_G=220; END_B=230

TEXT=$(cat <<'EOF'
â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—        
â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•        
â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â•šâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•‘           
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘           
â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘           
â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•           
                                           
â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•
EOF
)

LEN=${#TEXT}; ((LEN<2)) && LEN=2
for ((i=0;i<LEN;i++)); do
  C="${TEXT:i:1}"
  R=$((START_R+(END_R-START_R)*i/(LEN-1)))
  G=$((START_G+(END_G-START_G)*i/(LEN-1)))
  B=$((START_B+(END_B-START_B)*i/(LEN-1)))
  printf "\e[38;2;%d;%d;%dm%s" "$R" "$G" "$B" "$C"
done
printf "\e[0m\n\n"

#################################
# Info
#################################
echo -e "${LIGHT_BLUE}This script will install:${RESET}"
echo -e "${DIM_BLUE} â–¸${WHITE} Next.js (Tailwind + TypeScript)"
echo -e "${DIM_BLUE} â–¸${WHITE} shadcn/ui"
echo -e "${DIM_BLUE} â–¸${WHITE} Husky (Git hooks)"
echo

read -p "$(echo -e "${BLUE}Continue? (y/n): ${RESET}")" ok
[[ $ok != "y" && $ok != "yes" ]] && echo -e "${RED}Cancelled${RESET}" && exit 0

#################################
# Next.js
#################################
echo -e "\n${BLUE}âžœ Creating Next.js app${RESET}"
npx create-next-app@latest .

#################################
# shadcn
#################################
echo -e "\n${BLUE}âžœ Initializing shadcn${RESET}"
npx shadcn@latest init

#################################
# Git + Husky
#################################
echo -e "\n${BLUE}âžœ Initializing Git${RESET}"
[ ! -d .git ] && git init

echo -e "${BLUE}âžœ Installing Husky${RESET}"
npm install -D husky

echo -e "${BLUE}âžœ Enabling Husky${RESET}"
npx husky install
npm pkg set scripts.prepare="husky install"

echo -e "${BLUE}âžœ Adding pre-commit hook${RESET}"
npx husky add .husky/pre-commit "npm run lint"

#################################
# Done
#################################
echo
echo -e "${GREEN}ðŸŽ‰ Setup complete!"
echo -e "${LIGHT_BLUE}Husky is now protecting your commits ðŸ›¡ï¸${RESET}"

